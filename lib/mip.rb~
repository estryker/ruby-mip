class MiP

  def initialize(uuid)
    
  end

  
  
  def flash_chest(color, on_duration = 5, off_duration = 5)
    send_command(0x81, color_to_bytes(color), on_duration & 0xFF, off_duration & 0xFF)
  end

  def drive_time

  end
  
  private
  def send_command(*args)
    # flatten the args, make sure each byte is between 0-0xFF, and send it.
    @ble.write(args.flatten.map {|b| b & 0xFF}.pack(""))
    
    # return any response in packed byte format
    pack_response(@ble.read)
  end

  def pack_response(response)
    # convert from ascii hex to an array of bytes. To be interpreted by the sending function
  end
  
end
